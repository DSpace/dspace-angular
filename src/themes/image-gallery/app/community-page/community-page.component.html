<div class="container" *ngVar="(communityRD$ | async) as communityRD">
  @if (communityRD?.hasSucceeded) {
    <div class="community-page" @fadeInOut>
      @if (communityRD?.payload; as communityPayload) {
        <div>
          <div class="d-flex flex-row border-bottom mb-4 pb-4">
            <header class="comcol-header me-auto">
              <!-- Community name -->
              <ds-comcol-page-header [name]="dsoNameService.getName(communityPayload)"></ds-comcol-page-header>
              <!-- Community logo -->
              @if (logoRD$) {
                <!-- TAMU Customization - wrap text around logo -->
                <!-- <ds-comcol-page-logo [logo]="(logoRD$ | async)?.payload" [alternateText]="'community.logo' | translate">
                </ds-comcol-page-logo> -->
                <ds-comcol-page-logo class="float-left mr-4" [logo]="(logoRD$ | async)?.payload" [alternateText]="'community.logo' | translate">
                </ds-comcol-page-logo>
                <!-- End TAMU Customization - wrap text around logo -->
              }
              <!-- Handle -->
              <ds-comcol-page-handle [content]="communityPayload.handle" [title]="'community.page.handle'">
              </ds-comcol-page-handle>
              <!-- Introductory text -->
              <ds-comcol-page-content [content]="communityPayload.introductoryText" [hasInnerHtml]="true">
              </ds-comcol-page-content>
              <!-- News -->
              <ds-comcol-page-content [content]="communityPayload.sidebarText" [hasInnerHtml]="true"
                [title]="'community.page.news'">
              </ds-comcol-page-content>
            </header>
            <ds-dso-edit-menu></ds-dso-edit-menu>
          </div>
          <section class="comcol-page-browse-section">
            <!-- Browse-By Links -->
            <ds-comcol-page-browse-by [id]="communityPayload.id" [contentType]="communityPayload.type">
            </ds-comcol-page-browse-by>

            <!-- TAMU Customization - community collection tree browse -->
            <!-- <ds-community-list [scopeId]="communityPayload.id" [enableExpandCollapseAll]="true"></ds-community-list> -->
            <!-- End TAMU Customization - community collection tree browse -->

            <!-- TAMU Customization - recent submissions grid view -->
            <ng-container *ngVar="(itemRD$ | async) as itemRD">
              @if (itemRD?.hasSucceeded) {
                <div class="mt-4" @fadeIn>
                  <h3>{{'collection.page.browse.recent.head' | translate}}</h3>
                  <ds-object-grid
                      [config]="paginationConfig"
                      [sortConfig]="sortConfig"
                      [objects]="itemRD"
                      [hideGear]="false"
                      [context]="'ItemPage'">
                  </ds-object-grid>
                </div>
              }
              @if (itemRD?.hasFailed) {
                <ds-error *ngIf="itemRD?.hasFailed"message="{{'error.recent-submissions' | translate}}"></ds-error>
              }
              @if (!itemRD || itemRD.isLoading) {
                <ds-loading message="{{'loading.recent-submissions' | translate}}"></ds-loading>
              }
              @if (!itemRD?.isLoading && itemRD?.payload?.page.length === 0) {
                <div class="alert alert-info w-100" role="alert">{{'collection.page.browse.recent.empty' | translate}}</div>
              }
            </ng-container>
            <!-- End TAMU Customization - recent submissions grid view -->

            <router-outlet></router-outlet>
          </section>
          @if (communityPayload.copyrightText) {
            <footer class="border-top my-5 pt-4">
              <!-- Copyright -->
              <ds-comcol-page-content [content]="communityPayload.copyrightText" [hasInnerHtml]="true">
              </ds-comcol-page-content>
            </footer>
          }
        </div>
      }
    </div>
  }

  @if (communityRD?.hasFailed) {
    <ds-error message="{{'error.community' | translate}}"></ds-error>
  }
  @if (communityRD?.isLoading) {
    <ds-loading message="{{'loading.community' | translate}}"></ds-loading>
  }
</div>
