<div class="container-fluid">
  <div class="row">
    <div class="col-12 d-inline-block mb-1">
      <span>{{type.value + '.edit.logo.label' | translate}}</span>
    </div>
    <ng-container *ngVar="(dso?.logo | async)?.payload as logo">
      <div class="col-12 d-inline-block alert" [ngClass]="{'alert-danger': markLogoForDeletion}" id="logo-section" *ngIf="logo">
        <div class="row">
          <div class="col-8 d-inline-block">
            <ds-comcol-page-logo [alternateText]="type.value + '.logo.alt'" [logo]="logo"></ds-comcol-page-logo>
          </div>
          <div class="col-4 d-inline-block">
            <div *ngIf="logo" class="btn-group btn-group-sm float-right" role="group">
              <button (click)="confirmLogoDelete(removeLogo)" *ngIf="!markLogoForDeletion" class="btn btn-danger"
                      title="{{type.value + '.edit.logo.delete.title' | translate}}" type="button">
                <i aria-hidden="true" class="fas fa-trash"></i>
                {{ 'community.edit.logo.delete.title' | translate}}
              </button>
              <button *ngIf="!markLogoForDeletion" class="btn btn-info" type="button">
                <span>
                  <label (keyup.enter)="$event.stopImmediatePropagation(); fileInput.click()" for="inputFileUploader">
                    <span role="button">
                      <i aria-hidden="true" class="fas fa-upload"></i>
                      {{ 'collection.edit.logo.replace.title' | translate}}
                    </span>
                  </label>
                </span>
              </button>
            </div>
          </div>
        </div>
      </div>
      <div *ngIf="!logo" class="col-12 d-inline-block">
        <ds-uploader  *ngIf="initializedUploaderOptions | async"
                      [ariaLabel]="type.value + '.browse.logo'"
                      [dropMsg]="type.value + '.edit.logo.upload'"
                      [dropOverDocumentMsg]="type.value + '.edit.logo.upload'"
                      [enableDragOverDocument]="true"
                      [uploadFilesOptions]="uploadFilesOptions"
                      (onCompleteItem)="onCompleteItem()"
                      (onUploadError)="onUploadError()"></ds-uploader>
      </div>
    </ng-container>
  </div>
</div>
<ds-form *ngIf="formModel"
         [formId]="'comcol-form-id'"
         [formModel]="formModel"
         [displayCancel]="false"
         (submitForm)="onSubmit()">
  <button (click)="back.emit()" before class="btn btn-outline-secondary" type="button">
    <i class="fas fa-arrow-left" aria-hidden="true"></i> {{ type.value + '.edit.return' | translate }}
  </button>
</ds-form>
<ng-template #removeLogo let-c="close" let-d="dismiss">
  <div class="modal-header">
    <h4 class="modal-title text-info">{{'collection.edit.logo.delete.title' | translate}}</h4>
  </div>
  <div class="modal-body">
    <p>{{'admin.edit-user-agreement.confirm.info' | translate}}</p>
  </div>
  <div class="modal-footer">
    <button (click)="c('delete')" class="btn btn-danger"
            type="button">{{'collection.edit.logo.delete.title' | translate}}</button>
    <button (click)="c('cancel')" class="btn btn-warning" type="button">{{'form.cancel' | translate}}</button>
  </div>
</ng-template>
<input #fileInput (change)="handleLogoReplace($event)" [uploader]="uploader" class="d-none" id="inputFileUploader" ng2FileSelect
       type="file"/>
